version: '3.8'
services:
  flask:
    build: ./app
    container_name: terracore-flask
    ports:
      - "5050:5000"
    volumes:
      - ./app:/app
      - ./gunicorn.conf.py:/app/gunicorn.conf.py  # Mount gunicorn config from project root
    restart: unless-stopped
    environment:
      SECRET_KEY: "devsecret"
      SQLALCHEMY_DATABASE_URI: “dummy”
      OPENAI_API_KEY: "sk-test"
      GOOGLE_OAUTH_CLIENT_ID: “dummy”
      GOOGLE_OAUTH_CLIENT_SECRET: “dummy”
      OAUTHLIB_INSECURE_TRANSPORT: "1"

volumes:
  mysql_data: